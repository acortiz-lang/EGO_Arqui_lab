---
title: "Arqui.lab"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
```

ESTADO GENERAL DEL PROYECTO
====



Column {data-width=250}
-----------------------------------------------------------------------

### Chart A

```{r}

```

Column {data-width=850}
-----------------------------------------------------------------------

### Chart B

```{r}

```

### Chart C

```{r}

```











CRONOGRAMA DE DESEMBOLSO
========================


 * SUBCONTRATISTAS
 * INTERNOS
 * RETRASOS
 * RECURSOS DE OBRA
 
 | EMPRESA | TAREA | 
 |---------|-------|
 | Cimadera | Tirantes de techo |
 | Hidrobombas | Saniatarios |
 | Termoobras | Termomecanica |
 





GRADO DE AVANCE
================

```{r}
# Cargar la librer√≠a necesaria para el gr√°fico
library(ggplot2)
library(dplyr)
library(tidyr)
library(scales) # Para formatear los porcentajes

# 1. Definir los datos üìä

# Nombres de los meses (eje X)
meses <- month.name[1:12] # Usa month.name para nombres en ingl√©s (por defecto en R)
# Si quieres los nombres en espa√±ol, puedes definirlos as√≠:
# meses_espanol <- c("Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
#                    "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre")

# Avance Te√≥rico (distribuido uniformemente)
# Avance Acumulado Te√≥rico
avance_teorico_mensual <- 100/12
avance_teorico_acumulado <- cumsum(rep(avance_teorico_mensual, 12))

# Avance Real (tus valores proporcionados)
# Est√°n en porcentajes, los convertimos a decimal para ggplot
avance_real_mensual_pct <- c(20, 5, 15, 30, 8, 45, 6, 10, 35, 25, 0, 0)
avance_real_mensual <- avance_real_mensual_pct / 100
avance_real_acumulado <- cumsum(avance_real_mensual)


# 2. Crear un marco de datos (data frame) y transformar (tidy)

datos_avance <- data.frame(
  Mes = factor(meses, levels = meses), # Asegurar el orden correcto en el eje X
  Teorico = avance_teorico_acumulado,
  Real = avance_real_acumulado
)

# Convertir de formato "wide" a "long" para facilitar el uso de ggplot (mejor pr√°ctica)
datos_long <- datos_avance %>%
  pivot_longer(
    cols = c(Teorico, Real),
    names_to = "Tipo_Avance",
    values_to = "Avance_Acumulado"
  )

# 3. Crear el gr√°fico con ggplot2 üèóÔ∏è
grafico <- ggplot(datos_long, aes(x = Mes, y = Avance_Acumulado, fill = Tipo_Avance)) +
  
  # A√±adir las barras (position = "dodge" las pone lado a lado)
  geom_bar(stat = "identity", position = "dodge", alpha = 0.8) +
  
  # A√±adir etiquetas de valor sobre las barras
  geom_text(
    aes(label = percent(Avance_Acumulado / 100, accuracy = 1)), # Formatear como %
    position = position_dodge(width = 0.9), # Posicionar encima de las barras
    vjust = -0.5, # Ajuste vertical
    size = 3.5,
    fontface = "bold"
  ) +
  
  # T√≠tulos y etiquetas
  labs(
    title = "Comparaci√≥n de Avance de Obra (Acumulado)",
    subtitle = "Avance Te√≥rico vs. Avance Real",
    x = "Mes",
    y = "Avance Acumulado",
    fill = "Tipo de Avance"
  ) +
  
  # Escala del eje Y en porcentajes
  scale_y_continuous(
    labels = percent_format(accuracy = 1), # Formatear como porcentaje
    limits = c(0, 105) # Asegurar que las etiquetas quepan
  ) +
  
  # Colores m√°s amigables (opcional)
  scale_fill_manual(values = c("Teorico" = "#4CAF50", "Real" = "#2196F3")) + # Verde y Azul
  
  # Tema para una mejor apariencia
  theme_minimal() +
  
  # Ajustes adicionales del tema
  theme(
    plot.title = element_text(hjust = 0.5, face = "bold"),
    plot.subtitle = element_text(hjust = 0.5),
    axis.text.x = element_text(angle = 45, hjust = 1) # Rotar etiquetas para mejor lectura
  )

# Mostrar el gr√°fico
print(grafico)
```



